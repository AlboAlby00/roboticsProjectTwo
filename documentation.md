### Alberto Confente --- 10676663
### Matteo Delpini   ----- 10658676
### Miriam Di Napoli --- 10720326
#

# Robotics - Project 2

## Brief description of the files

### C++ file
- **odom_tf**: defines a node that subscribes to the `"odom"` topic, computes the tf from the "odom" reference frame to the "base_link" reference frame, and publishes it by using the `sendTransform` function.

### python file 
- **trajectory_drawer** : defines a node that gets the map (`"nav_msgs/OccupancyGrid"` object that contains metadata "info") at the beginning from mapserver topics.
Gets pose from topic amcl_pose, compute the corresponding cell and set occupancy to 100.
provide a service that takes the current occupancyGrid and saves it into a png file
#
### Launch files
- **amcl**: launch file to perform amcl based localization
- **trajectory_drawer** : launche file for python file trajectory_drawer

- **launcher_all**: launches all the following files:
```
    gmapping: launch file to compute map 

    rviz_for_gmapping: launch file to visualize robot navigation

    odom_tf: launches node in odom_tf file

    scan_merger: launch file to merge the two laser

    static_laser_tf: launch file for static tranformations
        base_link to laser front node, 
        base_link to laser rear node,
        base_link to scan node
```

#

### Map 
- **map.pgm**: map created from bag file 
#
### Rviz
- **robot_navigation** : file with positions of the robot
- **showLaser**: file to visualize the laser
#
## Structure of the tf tree
- the tf tree has the following structure:
map-> odom -> base_footprint -> base_link -> laser_front , laser_rear , laser_scan

### map-> odom
bliblobla

### Dynamic-TF (odom -> base_footprint )
- This TF is generated by the `TfBroad` node (defined in the `odom_tf.cpp` file), by listening to every message on the topic `"odom"`.
### Static-TF (base_link -> laser_front, base_link -> laser_rear, base_link -> laser_scan)
- This TF are generated by `static_transform_publisher` node(ROS node for static transformations) 
#
## bag used to create map
- robotics1_final.bag

## bags used to do localization
- robotics2_final.bag
- robotics3_final.bag

## node used to create the image of map + trajectory
- node defined in python file trajectory_drawer.py 
#
## description of usage
- The map can be generated by typing "roslaunch robotics_project_two map_generation_launcher.launch". 
- Amcl can be launched typing "roslaunch robotics_project_two amcl.launch".
- To generate the png image with map + trajectory, you need to generate the map, save it to path .../robotics_project_two/map/map.yaml, then launch           amcl.launch and call the service "create_map_and_trajectory_image" by typing "rosservice call /create_map_and_trajectory_image". Image will be saved in
 "robotics_project_two/map_with_trajectory.png
   
- The nodes will be listening to their inputs, which can be provided by typing `rosbag play --clock <path_to_bagfile.bag>`, as we've done with the three given bags.

- To call the `create_map_and_trajectory_image` sevice provided by trajectory_drawer simply type `rosservice call create_map_and_trajectory_image`
